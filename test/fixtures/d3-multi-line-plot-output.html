<!DOCTYPE html>
<html lang='en'>

<head>

  <link href='http://getbootstrap.com/dist/css/bootstrap.min.css' rel='stylesheet'>
  <link href='http://getbootstrap.com/examples/justified-nav/justified-nav.css' rel='stylesheet'>
  <script src='http://d3js.org/d3.v3.min.js' charset='utf-8'></script>

  <style>

    #visualisation {
      padding: 0 20px;
    }

    .axis path {
      fill: none;
      stroke: #777;
      shape-rendering: crispEdges;
    }

    .axis text {
      font-family: Lato;
      font-size: 13px;
    }

  </style>

</head>

<body>

<div class='container'>

  <div class='jumbotron'>

    <svg id='visualisation'></svg>

    <script>

      let heapTotal = JSON.parse('[{"x":1501525090739,"y":30445568},{"x":1501525092744,"y":30445568},{"x":1501525094745,"y":30445568},{"x":1501525096747,"y":30445568},{"x":1501525098748,"y":30445568},{"x":1501525100748,"y":30445568},{"x":1501525102748,"y":30445568},{"x":1501525104749,"y":30445568},{"x":1501525106749,"y":30445568},{"x":1501525108748,"y":30445568},{"x":1501525110748,"y":30445568},{"x":1501525112750,"y":31494144},{"x":1501525114751,"y":31494144},{"x":1501525116751,"y":31494144},{"x":1501525118752,"y":31494144},{"x":1501525120752,"y":31494144},{"x":1501525122752,"y":31494144},{"x":1501525124752,"y":31494144},{"x":1501525126754,"y":31494144},{"x":1501525128755,"y":49319936},{"x":1501525130756,"y":49319936},{"x":1501525132757,"y":49319936},{"x":1501525134757,"y":49319936},{"x":1501525136758,"y":49319936},{"x":1501525138758,"y":49319936},{"x":1501525140758,"y":49319936},{"x":1501525142758,"y":49319936},{"x":1501525144758,"y":49319936},{"x":1501525146759,"y":50368512},{"x":1501525148759,"y":50368512},{"x":1501525150760,"y":50368512},{"x":1501525152760,"y":50368512},{"x":1501525154759,"y":50368512},{"x":1501525156761,"y":50368512},{"x":1501525158761,"y":50368512},{"x":1501525160762,"y":50368512},{"x":1501525162763,"y":51417088},{"x":1501525164764,"y":51417088},{"x":1501525166765,"y":51417088},{"x":1501525168766,"y":51417088},{"x":1501525170767,"y":51417088},{"x":1501525172767,"y":51417088},{"x":1501525174766,"y":51417088},{"x":1501525176766,"y":51417088},{"x":1501525178766,"y":52465664},{"x":1501525180767,"y":52465664},{"x":1501525182767,"y":52465664},{"x":1501525184768,"y":52465664},{"x":1501525186768,"y":52465664}]');
      let heapUsed = JSON.parse('[{"x":1501525090739,"y":11592096},{"x":1501525092744,"y":15812712},{"x":1501525094745,"y":15483592},{"x":1501525096747,"y":14702144},{"x":1501525098748,"y":15168968},{"x":1501525100748,"y":15618144},{"x":1501525102748,"y":14667224},{"x":1501525104749,"y":15131928},{"x":1501525106749,"y":15743088},{"x":1501525108748,"y":14502584},{"x":1501525110748,"y":15020712},{"x":1501525112750,"y":15982776},{"x":1501525114751,"y":14599784},{"x":1501525116751,"y":15215896},{"x":1501525118752,"y":15973176},{"x":1501525120752,"y":14950056},{"x":1501525122752,"y":15468688},{"x":1501525124752,"y":16270112},{"x":1501525126754,"y":15088808},{"x":1501525128755,"y":15689072},{"x":1501525130756,"y":24607016},{"x":1501525132757,"y":22677480},{"x":1501525134757,"y":15597552},{"x":1501525136758,"y":24521808},{"x":1501525138758,"y":22870504},{"x":1501525140758,"y":15880800},{"x":1501525142758,"y":24787224},{"x":1501525144758,"y":22885272},{"x":1501525146759,"y":16125888},{"x":1501525148759,"y":25154408},{"x":1501525150760,"y":23122968},{"x":1501525152760,"y":15788080},{"x":1501525154759,"y":24871520},{"x":1501525156761,"y":22795688},{"x":1501525158761,"y":15463096},{"x":1501525160762,"y":24502000},{"x":1501525162763,"y":22572584},{"x":1501525164764,"y":15680264},{"x":1501525166765,"y":24980080},{"x":1501525168766,"y":22611072},{"x":1501525170767,"y":15726784},{"x":1501525172767,"y":24826816},{"x":1501525174766,"y":22445920},{"x":1501525176766,"y":31276712},{"x":1501525178766,"y":24563248},{"x":1501525180767,"y":21986984},{"x":1501525182767,"y":30985448},{"x":1501525184768,"y":24276304},{"x":1501525186768,"y":22023488}]');
      let rss = JSON.parse('[{"x":1501525090739,"y":47849472},{"x":1501525092744,"y":50622464},{"x":1501525094745,"y":54317056},{"x":1501525096747,"y":57073664},{"x":1501525098748,"y":57171968},{"x":1501525100748,"y":57237504},{"x":1501525102748,"y":58249216},{"x":1501525104749,"y":58474496},{"x":1501525106749,"y":58605568},{"x":1501525108748,"y":58925056},{"x":1501525110748,"y":59195392},{"x":1501525112750,"y":59297792},{"x":1501525114751,"y":59617280},{"x":1501525116751,"y":59822080},{"x":1501525118752,"y":59871232},{"x":1501525120752,"y":60080128},{"x":1501525122752,"y":60280832},{"x":1501525124752,"y":60350464},{"x":1501525126754,"y":60530688},{"x":1501525128755,"y":61091840},{"x":1501525130756,"y":65265664},{"x":1501525132757,"y":71708672},{"x":1501525134757,"y":77983744},{"x":1501525136758,"y":77996032},{"x":1501525138758,"y":78475264},{"x":1501525140758,"y":78782464},{"x":1501525142758,"y":78782464},{"x":1501525144758,"y":79171584},{"x":1501525146759,"y":79351808},{"x":1501525148759,"y":79351808},{"x":1501525150760,"y":79785984},{"x":1501525152760,"y":79962112},{"x":1501525154759,"y":79962112},{"x":1501525156761,"y":80191488},{"x":1501525158761,"y":80408576},{"x":1501525160762,"y":80408576},{"x":1501525162763,"y":80609280},{"x":1501525164764,"y":80969728},{"x":1501525166765,"y":80969728},{"x":1501525168766,"y":81149952},{"x":1501525170767,"y":81358848},{"x":1501525172767,"y":81358848},{"x":1501525174766,"y":81530880},{"x":1501525176766,"y":81530880},{"x":1501525178766,"y":81797120},{"x":1501525180767,"y":81952768},{"x":1501525182767,"y":81952768},{"x":1501525184768,"y":82223104},{"x":1501525186768,"y":82382848}]');

      const values = heapTotal.concat(heapUsed).concat(rss).reduce(function (prev, curr) {

        return {
          xMin: Math.min(prev.xMin, curr.x),
          xMax: Math.max(prev.xMax, curr.x),
          yMin: Math.min(prev.yMin, curr.y),
          yMax: Math.max(prev.yMax, curr.y),
        }

      }, {
        xMin: Number.MAX_SAFE_INTEGER,
        xMax: -1,
        yMin: Number.MAX_SAFE_INTEGER,
        yMax: -1
      });
      
      let vis = d3.select('#visualisation'),
        WIDTH = 1200,
        HEIGHT = 800,
        MARGINS = {
          top: 20,
          right: 20,
          bottom: 20,
          left: 50
        },
        xScale = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([values.xMin - 50, values.xMax + 50]),
        yScale = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([values.yMin - 50, values.yMax + 50]),
        xAxis = d3.svg.axis()
        .scale(xScale),
        yAxis = d3.svg.axis()
        .scale(yScale)
        .orient('left');

      vis.attr("width", WIDTH)
      .attr("height", HEIGHT);

      vis.append('svg:g')
      .attr('class', 'x axis')
      .attr('transform', 'translate(0,' + (HEIGHT - MARGINS.bottom) + ')')
      .call(xAxis);

      vis.append('svg:g')
      .attr('class', 'y axis')
      .attr('transform', 'translate(' + (MARGINS.left) + ',0)')
      .call(yAxis);

      let lineGen = d3.svg.line()
      .x(function (d) {
        return xScale(d.x);
      })
      .y(function (d) {
        return yScale(d.y);
      })
      .interpolate('basis');

      vis.append('svg:path')
      .attr('d', lineGen(heapUsed))
      .attr('stroke', 'green')
      .attr('stroke-width', 2)
      .attr('fill', 'none');

      vis.append('svg:path')
      .attr('d', lineGen(heapTotal))
      .attr('stroke', 'blue')
      .attr('stroke-width', 2)
      .attr('fill', 'none');

      vis.append('svg:path')
      .attr('d', lineGen(rss))
      .attr('stroke', 'red')
      .attr('stroke-width', 2)
      .attr('fill', 'none');


    </script>
  </div>

</div>

</body>

</html>